CREATE TABLE Users ( 
    ID SERIAL PRIMARY KEY NOT NULL,
    USERNAME TEXT NOT NULL,
    PASSWORD TEXT NOT NULL,
    ROLE_ID INT NOT NULL
);
ALTER TABLE Users ADD CONSTRAINT users_fk FOREIGN KEY (role_id) REFERENCES Roles ON DELETE CASCADE;

CREATE TABLE Roles (
    ID SERIAL PRIMARY KEY NOT NULL,
    ROLE TEXT NOT NULL
);

CREATE TABLE Profile (
    ID SERIAL PRIMARY KEY NOT NULL,
    USER_ID INT NOT NULL,
    EMAIL TEXT NOT NULL,
    GENDER TEXT NOT NULL,
    BIO TEXT NOT NULL
);
ALTER TABLE Profile ADD CONSTRAINT profile_fk FOREIGN KEY (user_id) REFERENCES Users ON DELETE CASCADE;

CREATE TABLE Problems (
    ID SERIAL PRIMARY KEY NOT NULL,
    Name TEXT NOT NULL
);

CREATE TABLE Ratings (
    ID SERIAL PRIMARY KEY NOT NULL,
    PROBLEM_ID INT NOT NULL,
    USER_ID INT NOT NULL,
    RATING INT NOT NULL
);
ALTER TABLE Ratings ADD CONSTRAINT ratings_user_fk FOREIGN KEY (user_id) REFERENCES Users ON DELETE CASCADE;
ALTER TABLE Ratings ADD CONSTRAINT ratings_problem_fk FOREIGN KEY (problem_id) REFERENCES Problems ON DELETE CASCADE;

CREATE TABLE Comments (
    ID SERIAL PRIMARY KEY NOT NULL,
    PROBLEM_ID INT NOT NULL,
    USER_ID INT NOT NULL,
    TEXT TEXT NOT NULL,
    DATE TIMESTAMP NOT NULL
);
ALTER TABLE Comments ADD CONSTRAINT comments_user_fk FOREIGN KEY (user_id) REFERENCES Users ON DELETE CASCADE;
ALTER TABLE Comments ADD CONSTRAINT comments_problem_fk FOREIGN KEY (problem_id) REFERENCES Problems ON DELETE CASCADE;


